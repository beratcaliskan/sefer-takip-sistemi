<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İETT Sefer Takip Sistemi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'soft-blue': '#e0f2fe',
                        'soft-green': '#f0fdf4',
                        'soft-purple': '#faf5ff',
                        'soft-gray': '#f8fafc',
                        'accent-blue': '#0ea5e9',
                        'accent-green': '#22c55e',
                        'accent-purple': '#a855f7'
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-soft-gray to-soft-blue min-h-screen">
    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-sm shadow-sm border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="bg-accent-blue p-2 rounded-lg">
                        <i class="fas fa-bus text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">İETT</h1>
                        <p class="text-xs text-gray-500">Sefer Takip Sistemi</p>
                    </div>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="/" class="text-accent-blue font-medium border-b-2 border-accent-blue pb-1">Anasayfa</a>
                    <a href="/seferler" class="text-gray-600 hover:text-accent-blue transition-colors font-medium">Seferler</a>
                    <a href="/hatlar" class="text-gray-600 hover:text-accent-blue transition-colors font-medium">Hatlar</a>
                    <a href="/users" class="text-gray-600 hover:text-accent-blue transition-colors font-medium">Kullanıcılar</a>
                    <a href="/raporlar" class="text-gray-600 hover:text-accent-blue transition-colors font-medium">Raporlar</a>
                    <a href="/swagger" class="text-gray-600 hover:text-accent-blue transition-colors font-medium">API</a>
                </nav>
                
                <!-- User Info Dropdown -->
                <div class="flex items-center space-x-4">
                    <div class="relative" id="userDropdown">
                        <button class="flex items-center space-x-3 bg-white hover:bg-gray-50 border border-gray-200 rounded-lg px-4 py-2 transition-all shadow-sm" onclick="toggleUserDropdown()">
                            <div class="w-8 h-8 bg-gradient-to-r from-accent-blue to-blue-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-white text-sm"></i>
                            </div>
                            <div class="hidden sm:block text-left">
                                <div class="text-sm font-semibold text-gray-800">Kullanıcı</div>
                                <div class="text-xs text-gray-500">Kullanıcı</div>
                            </div>
                            <i class="fas fa-chevron-down text-gray-400 text-xs transition-transform" id="dropdownIcon"></i>
                        </button>
                        
                        <!-- Dropdown Menu -->
                        <div class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50 hidden" id="dropdownMenu">
                            <div class="px-4 py-3 border-b border-gray-100">
                                <div class="text-sm font-semibold text-gray-800">Kullanıcı</div>
                                <div class="text-xs text-gray-500">kullanici@iett.gov.tr</div>
                                <div class="text-xs text-accent-blue font-medium mt-1">Kullanıcı</div>
                            </div>
                            <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors">
                                <i class="fas fa-user-circle mr-3 text-gray-400"></i>
                                Profil Ayarları
                            </a>
                            <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors">
                                <i class="fas fa-cog mr-3 text-gray-400"></i>
                                Hesap Ayarları
                            </a>
                            <a href="#" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors">
                                <i class="fas fa-bell mr-3 text-gray-400"></i>
                                Bildirimler
                            </a>
                            <div class="border-t border-gray-100 mt-2 pt-2">
                                <button class="flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors" onclick="logout()">
                                    <i class="fas fa-sign-out-alt mr-3 text-red-500"></i>
                                    Çıkış Yap
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mobile Menu Button -->
                    <button class="md:hidden p-2 rounded-lg hover:bg-gray-100">
                        <i class="fas fa-bars text-gray-600"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="py-20 px-4">
        <div class="max-w-7xl mx-auto text-center">
            <div class="mb-8">
                <div class="inline-flex items-center justify-center w-20 h-20 bg-white rounded-full shadow-lg mb-6">
                    <i class="fas fa-route text-3xl text-accent-blue"></i>
                </div>
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
                    Modern Sefer
                    <span class="text-accent-blue">Yönetimi</span>
                </h2>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
                    İETT otobüs seferlerini kolayca planlayın, takip edin ve raporlayın. 
                    Akıllı yönetim sistemi ile operasyonlarınızı optimize edin.
                </p>
            </div>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button class="bg-accent-blue hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 shadow-lg">
                    <i class="fas fa-play mr-2"></i>
                    Sistemi Başlat
                </button>
                <button class="bg-white hover:bg-gray-50 text-gray-700 px-8 py-3 rounded-lg font-semibold transition-all border border-gray-200 shadow-lg">
                    <i class="fas fa-chart-bar mr-2"></i>
                    Raporları İncele
                </button>
            </div>
        </div>
    </section>

    <!-- Features Grid -->
    <section class="py-16 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-16">
                <h3 class="text-3xl font-bold text-gray-800 mb-4">Sistem Özellikleri</h3>
                <p class="text-gray-600 max-w-2xl mx-auto">Modern teknoloji ile güçlendirilmiş kapsamlı sefer yönetim çözümü</p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Feature 1 -->
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                    <div class="bg-soft-blue p-3 rounded-lg w-fit mb-4">
                        <i class="fas fa-calendar-alt text-accent-blue text-xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Sefer Planlama</h4>
                    <p class="text-gray-600 leading-relaxed">Otobüs seferlerini kolayca planlayın, şoför ve araç atamaları yapın.</p>
                </div>

                <!-- Feature 2 -->
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                    <div class="bg-soft-green p-3 rounded-lg w-fit mb-4">
                        <i class="fas fa-map-marked-alt text-accent-green text-xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Hat Yönetimi</h4>
                    <p class="text-gray-600 leading-relaxed">Tüm otobüs hatlarını merkezi olarak yönetin ve güncelleyin.</p>
                </div>

                <!-- Feature 3 -->
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                    <div class="bg-soft-purple p-3 rounded-lg w-fit mb-4">
                        <i class="fas fa-chart-line text-accent-purple text-xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Raporlama</h4>
                    <p class="text-gray-600 leading-relaxed">Detaylı raporlar ve analizler ile performansı takip edin.</p>
                </div>

                <!-- Feature 4 -->
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                    <div class="bg-soft-blue p-3 rounded-lg w-fit mb-4">
                        <i class="fas fa-users text-accent-blue text-xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Şoför Yönetimi</h4>
                    <p class="text-gray-600 leading-relaxed">Şoför bilgilerini yönetin ve mesai planlaması yapın.</p>
                </div>

                <!-- Feature 5 -->
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                    <div class="bg-soft-green p-3 rounded-lg w-fit mb-4">
                        <i class="fas fa-tools text-accent-green text-xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Bakım Takibi</h4>
                    <p class="text-gray-600 leading-relaxed">Araç bakım kayıtlarını tutun ve maliyetleri izleyin.</p>
                </div>

                <!-- Feature 6 -->
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                    <div class="bg-soft-purple p-3 rounded-lg w-fit mb-4">
                        <i class="fas fa-gas-pump text-accent-purple text-xl"></i>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Yakıt Yönetimi</h4>
                    <p class="text-gray-600 leading-relaxed">Yakıt tüketimini takip edin ve maliyet analizleri yapın.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="py-16 px-4 bg-white/50">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                <div class="p-6">
                    <div class="text-3xl font-bold text-accent-blue mb-2" id="total-routes">5</div>
                    <div class="text-gray-600 font-medium">Aktif Hat</div>
                </div>
                <div class="p-6">
                    <div class="text-3xl font-bold text-accent-green mb-2" id="total-buses">5</div>
                    <div class="text-gray-600 font-medium">Otobüs</div>
                </div>
                <div class="p-6">
                    <div class="text-3xl font-bold text-accent-purple mb-2" id="total-drivers">4</div>
                    <div class="text-gray-600 font-medium">Şoför</div>
                </div>
                <div class="p-6">
                    <div class="text-3xl font-bold text-gray-700 mb-2" id="total-trips">2</div>
                    <div class="text-gray-600 font-medium">Günlük Sefer</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Actions -->
    <section class="py-16 px-4">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-gray-800 mb-4">Hızlı İşlemler</h3>
                <p class="text-gray-600">Sık kullanılan işlemlere hızlı erişim</p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-gradient-to-r from-accent-blue to-blue-600 rounded-xl p-6 text-white cursor-pointer hover:shadow-xl transition-all transform hover:scale-105">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="text-xl font-semibold mb-2">Yeni Sefer Planla</h4>
                            <p class="text-blue-100">Hızlıca yeni bir sefer oluşturun</p>
                        </div>
                        <i class="fas fa-plus-circle text-3xl text-blue-200"></i>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-accent-green to-green-600 rounded-xl p-6 text-white cursor-pointer hover:shadow-xl transition-all transform hover:scale-105">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="text-xl font-semibold mb-2">Günlük Rapor</h4>
                            <p class="text-green-100">Bugünün sefer raporunu görüntüleyin</p>
                        </div>
                        <i class="fas fa-chart-bar text-3xl text-green-200"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="bg-accent-blue p-2 rounded-lg">
                            <i class="fas fa-bus text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-bold">İETT Sefer Sistemi</h4>
                            <p class="text-sm text-gray-400">Modern Yönetim Çözümü</p>
                        </div>
                    </div>
                    <p class="text-gray-400 text-sm leading-relaxed">
                        Şehir içi toplu taşıma operasyonlarını verimli bir şekilde yönetmek için tasarlanmış modern sistem.
                    </p>
                </div>
                
                <div>
                    <h5 class="font-semibold mb-4">Hızlı Linkler</h5>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Seferler</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Hatlar</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Raporlar</a></li>
                        <li><a href="/swagger" class="text-gray-400 hover:text-white transition-colors">API Dokümantasyonu</a></li>
                    </ul>
                </div>
                
                <div>
                    <h5 class="font-semibold mb-4">İletişim</h5>
                    <div class="space-y-2 text-sm text-gray-400">
                        <p><i class="fas fa-envelope mr-2"></i> info@iett.gov.tr</p>
                        <p><i class="fas fa-phone mr-2"></i> +90 212 XXX XX XX</p>
                        <p><i class="fas fa-map-marker-alt mr-2"></i> İstanbul, Türkiye</p>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-sm text-gray-400">
                <p>&copy; 2024 İETT Sefer Takip Sistemi. Tüm hakları saklıdır.</p>
            </div>
        </div>
    </footer>

    <script>
        // Session control - Check if user is logged in
        function checkSession() {
            const isLoggedIn = sessionStorage.getItem('isLoggedIn');
            if (!isLoggedIn || isLoggedIn !== 'true') {
                // Redirect to login page if not logged in
                window.location.href = '/login';
                return false;
            }
            return true;
        }

        // Load user data from session
        function loadUserData() {
            const userName = sessionStorage.getItem('userName') || 'Kullanıcı';
            const userEmail = sessionStorage.getItem('userEmail') || 'kullanici@iett.gov.tr';
            const userRole = sessionStorage.getItem('userRole') || 'user';
            
            // Update user name in header button
            const headerUserName = document.querySelector('button .text-sm.font-semibold.text-gray-800');
            if (headerUserName) {
                headerUserName.textContent = userName;
            }
            
            // Update user role in header button
            const headerUserRole = document.querySelector('button .text-xs.text-gray-500');
            if (headerUserRole) {
                const roleText = getRoleDisplayText(userRole);
                headerUserRole.textContent = roleText;
            }
            
            // Update user info in dropdown menu
            const dropdownUserName = document.querySelector('#dropdownMenu .text-sm.font-semibold.text-gray-800');
            if (dropdownUserName) {
                dropdownUserName.textContent = userName;
            }
            
            const dropdownUserEmail = document.querySelector('#dropdownMenu .text-xs.text-gray-500:not(.text-accent-blue)');
            if (dropdownUserEmail) {
                dropdownUserEmail.textContent = userEmail;
            }
            
            const dropdownUserRole = document.querySelector('#dropdownMenu .text-xs.text-accent-blue');
            if (dropdownUserRole) {
                const roleText = getRoleDisplayText(userRole);
                dropdownUserRole.textContent = roleText;
            }
        }
        
        // Get role display text
        function getRoleDisplayText(role) {
            switch(role) {
                case 'admin':
                    return 'Sistem Yöneticisi';
                case 'sofor':
                    return 'Şoför';
                case 'yonetici':
                    return 'Yönetici';
                default:
                    return 'Kullanıcı';
            }
        }

        // User Dropdown Functions
        function toggleUserDropdown() {
            const dropdown = document.getElementById('dropdownMenu');
            const icon = document.getElementById('dropdownIcon');
            
            if (dropdown.classList.contains('hidden')) {
                dropdown.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
            } else {
                dropdown.classList.add('hidden');
                icon.style.transform = 'rotate(0deg)';
            }
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userDropdown = document.getElementById('userDropdown');
            const dropdown = document.getElementById('dropdownMenu');
            const icon = document.getElementById('dropdownIcon');
            
            if (!userDropdown.contains(event.target)) {
                dropdown.classList.add('hidden');
                icon.style.transform = 'rotate(0deg)';
            }
        });
        
        // Logout function
        function logout() {
            // if (confirm('Çıkış yapmak istediğinizden emin misiniz?')) {
                // Clear session data
                sessionStorage.clear();
                localStorage.removeItem('rememberedUser');
                
                // Redirect to login page
                window.location.href = '/login';
            // }
        }
        
        // Simple animation for stats
        function animateStats() {
            const stats = [
                { id: 'total-routes', target: 5 },
                { id: 'total-buses', target: 5 },
                { id: 'total-drivers', target: 4 },
                { id: 'total-trips', target: 2 }
            ];
            
            stats.forEach(stat => {
                const element = document.getElementById(stat.id);
                let current = 0;
                const increment = stat.target / 20;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= stat.target) {
                        current = stat.target;
                        clearInterval(timer);
                    }
                    element.textContent = Math.floor(current);
                }, 50);
            });
        }
        
        // Initialize page
        window.addEventListener('load', () => {
            // Check session first
            if (checkSession()) {
                // Load user data if session is valid
                loadUserData();
                // Run stats animation
                setTimeout(animateStats, 500);
            }
        });
        
        // Check session on page focus (when user returns to tab)
        window.addEventListener('focus', function() {
            checkSession();
        });
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>